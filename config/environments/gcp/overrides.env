# GCP e2-micro Environment Overrides
ENV=gcp
PLATFORM=gcp

# Node configuration (only 2 nodes on e2-micro)
NODE_COUNT=2
NODE1_HOSTNAME=goud_node1
NODE2_HOSTNAME=goud_node2
NGINX_HOSTNAME=goud_nginx_lb
DASHBOARD_HOSTNAME=goud_dashboard

# Server names
API_SERVER_NAME="dev-api.goudchain.com _"
DASHBOARD_SERVER_NAME="dev-dashboard.goudchain.com localhost"

# Routing strategy
ROUTING_STRATEGY=writer_reader

# Endpoints (GCP does NOT include data/generate in reads - routed separately to node1)
READ_ENDPOINTS="chain|peers"
WRITE_ENDPOINTS="account/create|data/submit|data/decrypt|sync"

# Resource limits (use GCP values from constants.env)
NGINX_CPU_LIMIT=${GCP_NGINX_CPU_LIMIT}
NGINX_MEM_LIMIT=${GCP_NGINX_MEM_LIMIT}
NGINX_CPU_RESERVATION=${GCP_NGINX_CPU_RESERVATION}
NGINX_MEM_RESERVATION=${GCP_NGINX_MEM_RESERVATION}

DASHBOARD_CPU_LIMIT=${GCP_DASHBOARD_CPU_LIMIT}
DASHBOARD_MEM_LIMIT=${GCP_DASHBOARD_MEM_LIMIT}
DASHBOARD_CPU_RESERVATION=${GCP_DASHBOARD_CPU_RESERVATION}
DASHBOARD_MEM_RESERVATION=${GCP_DASHBOARD_MEM_RESERVATION}

# Node-specific limits for GCP (node1 is writer, gets more resources)
NODE1_CPU_LIMIT=${GCP_NODE1_CPU_LIMIT}
NODE1_MEM_LIMIT=${GCP_NODE1_MEM_LIMIT}
NODE1_CPU_RESERVATION=${GCP_NODE1_CPU_RESERVATION}
NODE1_MEM_RESERVATION=${GCP_NODE1_MEM_RESERVATION}

NODE2_CPU_LIMIT=${GCP_NODE2_CPU_LIMIT}
NODE2_MEM_LIMIT=${GCP_NODE2_MEM_LIMIT}
NODE2_CPU_RESERVATION=${GCP_NODE2_CPU_RESERVATION}
NODE2_MEM_RESERVATION=${GCP_NODE2_MEM_RESERVATION}

# Logging (more aggressive on GCP)
LOG_MAX_SIZE=${GCP_LOG_MAX_SIZE}
LOG_MAX_FILE=${GCP_LOG_MAX_FILE}

# Nginx specific (reduced for low memory)
NGINX_WORKER_PROCESSES=1
NGINX_WORKER_CONNECTIONS=512
NGINX_KEEPALIVE_CONNECTIONS=8

# Dashboard server block needed for GCP
DASHBOARD_SERVER_NEEDED=true

# Account operations routing - GCP routes ONLY to node1 for consistency
# This prevents "API key no longer valid" errors from chain inconsistency
ACCOUNT_OPERATIONS_ROUTING_STRATEGY=node1_only

# Additional listen directive (GCP uses both 80 and 8080)
ADDITIONAL_LISTEN_ENABLED=true
ADDITIONAL_LISTEN_PORT=8080

# ============================================================================
# RATE LIMITING (GCP - Conservative Limits)
# ============================================================================
# More conservative rate limits for e2-micro resource constraints
RATE_LIMIT_WRITE_PER_SEC=5
RATE_LIMIT_READ_PER_SEC=50
